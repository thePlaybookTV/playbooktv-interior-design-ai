# =============================================================================
# Modomo Backend Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual credentials
# DO NOT commit .env to version control!

# =============================================================================
# API Configuration
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_SECRET_KEY=your-secret-key-here-use-openssl-rand-hex-32
ENVIRONMENT=development  # development | staging | production

# =============================================================================
# Cloudflare R2 Storage Configuration
# =============================================================================
# Get these from: https://dash.cloudflare.com → R2 → Manage R2 API Tokens
CLOUDFLARE_ACCOUNT_ID=your-cloudflare-account-id
R2_ACCESS_KEY_ID=your-r2-access-key-id
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key
R2_BUCKET_NAME=your-bucket-name
R2_ENDPOINT_URL=https://your-account-id.r2.cloudflarestorage.com

# CDN Domain (optional, for faster delivery)
CDN_DOMAIN=your-cdn-domain.com

# =============================================================================
# Redis Configuration (for job queue)
# =============================================================================
# Option 1: Local Redis (recommended for development)
REDIS_URL=redis://localhost:6379

# Option 2: Redis Cloud (recommended for production)
# REDIS_URL=redis://:password@host:port

REDIS_PASSWORD=
REDIS_DB=0

# =============================================================================
# Modal Configuration (for SD inference)
# =============================================================================
# Get your Modal token from: https://modal.com/settings
# Or run: modal token new
MODAL_TOKEN_ID=your-modal-token-id-here
MODAL_TOKEN_SECRET=your-modal-token-secret-here
MODAL_APP_NAME=modomo-sd-inference
# Legacy support: MODAL_STUB_NAME also works
MODAL_STUB_NAME=modomo-sd-inference

# =============================================================================
# Model Configuration
# =============================================================================
# YOLO model (will auto-download if not found)
YOLO_MODEL_PATH=yolov8n.pt

# SAM2 checkpoint path
SAM2_CHECKPOINT=checkpoints/sam2_hiera_large.pt

# Phase1 trained model path
PHASE1_MODEL_PATH=models/best_interior_model.pth

# =============================================================================
# Training Configuration (Optional)
# =============================================================================
DEFAULT_ROOM_TYPE=living_room
DEFAULT_STYLE=modern

# Download Configuration
R2_MAX_WORKERS=10
R2_SKIP_EXISTING=true

# =============================================================================
# Monitoring & Analytics (Optional)
# =============================================================================
# Sentry for error tracking
# SENTRY_DSN=your-sentry-dsn-here

# Datadog for performance monitoring
# DATADOG_API_KEY=your-datadog-key-here

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================
#
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Install Redis (for job queue):
#    Mac:   brew install redis
#    Linux: sudo apt-get install redis-server
#
# 3. Start Redis:
#    redis-server
#
# 4. Set up Modal account:
#    - Sign up at https://modal.com
#    - Install Modal CLI: pip install modal
#    - Get token: modal token new
#    - Copy token ID and secret to .env
#
# 5. Set up Cloudflare R2:
#    - Go to https://dash.cloudflare.com
#    - Navigate to R2 Storage
#    - Create bucket or use existing
#    - Create API token with Read & Write permissions
#    - Copy credentials to .env
#
# 6. Install dependencies:
#    pip install -r requirements.txt
#
# 7. Start the API server:
#    uvicorn api.main:app --reload
#
# =============================================================================
